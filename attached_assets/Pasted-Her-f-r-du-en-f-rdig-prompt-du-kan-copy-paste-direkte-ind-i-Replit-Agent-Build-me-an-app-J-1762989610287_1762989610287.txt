Her f√•r du en f√¶rdig prompt, du kan copy-paste direkte ind i Replit (Agent / ‚ÄúBuild me an app‚Äù) üëá
Jeg skriver selve prompten p√• engelsk, s√• agenten bygger koden i korrekt tech-sprog.

‚∏ª


You are an expert full-stack developer building a production-ready golf tee-time finder for the Costa del Sol (Spain), from Sotogrande to M√°laga.

## GOAL / APP IDEA

Build a full-stack web app that:

1. Maintains a structured directory of ALL golf courses between **Sotogrande and M√°laga** along the south coast.
2. Can query/scrape or call APIs for those courses (or their booking providers) to find **next available tee times**.
3. Allows the user to:
   - Use current **geolocation** or a typed location
   - Find the **nearest golf course** and **next available tee time**
   - Filter by date, number of players and time window
   - Start a **booking flow** for a selected tee time
4. Includes an **email service** so the owner can send bulk or one-by-one emails to the golf clubs asking for a **kickback/affiliate deal (20% commission)** for guests referred by the platform.

The app does NOT need to actually charge credit cards yet; focus on searching tee times and storing ‚Äúbooking requests‚Äù plus sending emails.

Use a clean, modern UI.

---

## TECH STACK

- Backend: Node.js + Express (TypeScript if convenient)
- Database: SQLite (using Prisma or similar ORM) ‚Äì easy to run in Replit.
- Frontend: React + Vite (or React + CRA if easier) with a simple component library or plain CSS.
- HTTP client: `fetch` / `axios`.
- Geolocation: Browser `navigator.geolocation` with fallback to manual address, plus distance calculation (Haversine formula).
- Email sending: Configurable SMTP (e.g. using `nodemailer`). Read credentials from environment variables.

Keep everything in a single Replit project (monorepo) with `server/` and `client/` folders.

---

## DATA MODEL

Create a database with at least these tables:

### `golf_courses`
- `id` (primary key)
- `name`
- `city`
- `province`
- `country` (always "Spain")
- `lat` (nullable at first)
- `lng` (nullable at first)
- `website_url`
- `booking_url` (if different)
- `email` (general contact / reservations email)
- `phone`
- `notes` (text: e.g. ‚Äúbooking via Golfmanager‚Äù)

### `tee_time_providers`
(to abstract the different booking engines; optional but recommended)
- `id`
- `name` (e.g. "Golfmanager", "iMasterGolf", "TeeTimes.pt", ‚ÄúDirectClubSite‚Äù)
- `base_url`
- `type` (e.g. `SCRAPER`, `API`, `DEEP_LINK_ONLY`)
- optional config JSON

### `course_provider_links`
- `id`
- `course_id` (FK)
- `provider_id` (FK)
- `provider_course_code` (identifier used in their system, if needed)
- `booking_url` (full URL if deep link)

### `booking_requests`
- `id`
- `course_id`
- `tee_time` (datetime)
- `players` (int)
- `customer_name`
- `customer_email`
- `customer_phone`
- `status` (`PENDING`, `SENT_TO_COURSE`, `CONFIRMED`, `CANCELLED`)
- `created_at`

### `affiliate_emails`
- `id`
- `course_id`
- `subject`
- `body`
- `sent_at`
- `status` (`DRAFT`, `SENT`, `ERROR`)
- `error_message` (nullable)

---

## SEED DATA: GOLF COURSES (SOTOGRANDE ‚Üí M√ÅLAGA)

Seed the database with an initial list of courses between **Sotogrande and M√°laga** (Costa del Sol). Use this partial list as initial seed (you can add more if you want):

```ts
const seedCourses = [
  // Sotogrande / San Roque area
  {
    name: "Real Club Valderrama",
    city: "Sotogrande",
    province: "C√°diz",
    country: "Spain",
    website_url: "https://www.valderrama.com",
    booking_url: "https://www.valderrama.com",
    email: "greenfees@valderrama.com"
  },
  {
    name: "Real Club de Golf Sotogrande",
    city: "Sotogrande",
    province: "C√°diz",
    country: "Spain",
    website_url: "https://www.golfsotogrande.com",
    booking_url: "https://www.golfsotogrande.com",
    email: "info@golfsotogrande.com"
  },
  {
    name: "La Reserva Club Sotogrande",
    city: "Sotogrande",
    province: "C√°diz",
    country: "Spain",
    website_url: "https://www.sotogrande.com",
    booking_url: "https://www.sotogrande.com/en/golf",
    email: "lareserva@sotogrande.com"
  },
  {
    name: "San Roque Club",
    city: "San Roque",
    province: "C√°diz",
    country: "Spain",
    website_url: "https://www.sanroqueclub.com",
    booking_url: "https://www.sanroqueclub.com",
    email: "info@sanroqueclub.com"
  },
  {
    name: "Club de Golf La Ca√±ada",
    city: "Guadiaro / San Roque",
    province: "C√°diz",
    country: "Spain",
    website_url: "https://www.lacanadagolf.com",
    booking_url: "https://www.lacanadagolf.com",
    email: "reservas@lacanadagolf.com"
  },

  // Casares / Estepona area
  {
    name: "Finca Cortes√≠n Golf Club",
    city: "Casares",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.fincacortesin.com",
    booking_url: "https://www.fincacortesin.com/golf",
    email: "proshop@golfcortesin.es"
  },
  {
    name: "Casares Costa Golf",
    city: "Casares",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.casarescostagolf.com",
    booking_url: "https://www.casarescostagolf.com",
    email: "info@casarescostagolf.com"
  },
  {
    name: "Do√±a Julia Golf Club",
    city: "Casares",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.donajuliagolf.es",
    booking_url: "https://www.donajuliagolf.es",
    email: "reservas@donajuliagolf.es"
  },
  {
    name: "Valle Romano Golf & Resort",
    city: "Estepona",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.valleromano.es",
    booking_url: "https://www.valleromano.es/en/golf",
    email: "reservasgolf@valleromano.es"
  },
  {
    name: "El Para√≠so Golf Club",
    city: "Estepona",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://elparaisogolf.com",
    booking_url: "https://elparaisogolf.com",
    email: "info@elparaisogolfclub.com"
  },
  {
    name: "Estepona Golf",
    city: "Estepona",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.esteponagolf.com",
    booking_url: "https://esteponagolf.com/en/online-booking",
    email: "information@esteponagolf.com"
  },
  {
    name: "La Resina Golf & Country Club",
    city: "Estepona",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.laresinagolfclub.com",
    booking_url: "https://www.laresinagolfclub.com",
    email: "laresinagolf@hotmail.com"
  },
  {
    name: "Flamingos Golf (Villa Padierna)",
    city: "Benahav√≠s / Estepona",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.villapadiernagolfclub.com",
    booking_url: "https://www.villapadiernagolfclub.com/en/teetimes",
    email: "info@villapadiernagolfclub.com"
  },

  // Benahav√≠s / Marbella area
  {
    name: "Los Arqueros Golf & Country Club",
    city: "Benahav√≠s",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.losarquerosgolf.com",
    booking_url: "https://www.losarquerosgolf.com/en/tee-times",
    email: "caddiemaster@es.taylorwimpey.com"
  },
  {
    name: "El Higueral Golf",
    city: "Benahav√≠s",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.elhigueralgolf.com",
    booking_url: "https://www.elhigueralgolf.com",
    email: "reservas@elhigueralgolf.com"
  },
  {
    name: "Monte Mayor Golf & Country Club",
    city: "Benahav√≠s",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.montemayorspain.com",
    booking_url: "https://www.montemayorspain.com",
    email: "reservations@montemayorspain.com"
  },
  {
    name: "Marbella Club Golf Resort",
    city: "Benahav√≠s",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.marbellaclubgolf.com",
    booking_url: "https://www.marbellaclubgolf.com",
    email: "info@marbellaclubgolf.com"
  },
  {
    name: "Real Club de Golf Guadalmina (North & South)",
    city: "San Pedro de Alc√°ntara",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.guadalminagolf.com",
    booking_url: "https://www.guadalminagolf.com/en/tee-times",
    email: "reservas@guadalminagolf.com"
  },
  {
    name: "La Quinta Golf & Country Club",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.laquintagolf.com",
    booking_url: "https://www.laquintagolf.com/en/tee-times",
    email: "reservas@laquintagolf.com"
  },
  {
    name: "Los Naranjos Golf Club",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.losnaranjos.com",
    booking_url: "https://www.losnaranjos.com/en/booking",
    email: "golfclub@losnaranjos.com"
  },
  {
    name: "Real Club de Golf Las Brisas",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.realclubdegolflasbrisas.com",
    booking_url: "https://www.realclubdegolflasbrisas.com",
    email: "info@realclubdegolflasbrisas.com"
  },
  {
    name: "Aloha Golf Club",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.clubdegolfaloha.com",
    booking_url: "https://www.clubdegolfaloha.com",
    email: "info@clubdegolfaloha.com"
  },
  {
    name: "Magna Marbella Golf",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.magnamarbellagolf.com",
    booking_url: "https://www.magnamarbellagolf.com",
    email: "info@magnamarbellagolf.com"
  },
  {
    name: "Rio Real Golf & Hotel",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.rioreal.com",
    booking_url: "https://www.rioreal.com/en/golf/online-booking",
    email: "reservas@rioreal.com"
  },
  {
    name: "Santa Clara Golf Marbella",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.santaclaragolfmarbella.com",
    booking_url: "https://www.santaclaragolfmarbella.com/en/tee-times",
    email: "reservas@santaclaragolfmarbella.com"
  },
  {
    name: "Santa Maria Golf & Country Club",
    city: "Marbella (Elviria)",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.santamariagolfclub.com",
    booking_url: "https://www.santamariagolfclub.com/en/tee-times",
    email: "caddymaster@santamariagolfclub.com"
  },
  {
    name: "Marbella Golf & Country Club",
    city: "Marbella",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.marbellagolf.com",
    booking_url: "https://www.marbellagolf.com/online-bookings",
    email: "reservas@marbellagolf.com"
  },
  {
    name: "Greenlife Golf",
    city: "Marbella (Elviria)",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.greenlife-golf.com",
    booking_url: "https://www.greenlife-golf.com",
    email: "golf@greenlife-golf.com"
  },

  // Mijas / Fuengirola / Benalm√°dena / M√°laga
  {
    name: "La Cala Resort (America, Asia, Europa)",
    city: "Mijas Costa",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.lacala.com",
    booking_url: "https://www.lacala.com/en/golf/tee-times",
    email: "golf@lacala.com"
  },
  {
    name: "Mijas Golf (Los Lagos & Los Olivos)",
    city: "Mijas",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.mijasgolf.org",
    booking_url: "https://www.mijasgolf.org/teetimes",
    email: "teetimes@mijasgolf.org"
  },
  {
    name: "Santana Golf & Country Club",
    city: "Mijas Costa",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.santanagolf.com",
    booking_url: "https://www.santanagolf.com",
    email: "info@santanagolf.com"
  },
  {
    name: "El Chaparral Golf Club",
    city: "Mijas Costa",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.golfelchaparral.com",
    booking_url: "https://www.golfelchaparral.com/en/book-online",
    email: "reservas@golfelchaparral.com"
  },
  {
    name: "Miraflores Golf",
    city: "Mijas Costa",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.miraflores-golf.com",
    booking_url: "https://www.miraflores-golf.com",
    email: "info@miraflores-golf.com"
  },
  {
    name: "La Noria Golf & Resort",
    city: "La Cala de Mijas",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.lanoriagolf.com",
    booking_url: "https://www.lanoriagolf.com",
    email: "info@lanoriagolf.net"
  },
  {
    name: "La Siesta Golf",
    city: "Mijas Costa (Calahonda)",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.lasiestagolf.com",
    booking_url: "https://www.lasiestagolf.com",
    email: "lasiestagolf@gmail.com"
  },
  {
    name: "Cerrado del √Åguila Golf",
    city: "Mijas Costa",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.cerradodelaguila.com",
    booking_url: "https://www.cerradodelaguila.com/en/booking",
    email: "info@cerradodelaguila.com"
  },
  {
    name: "Lauro Golf (Lauro 27)",
    city: "Alhaur√≠n de la Torre",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.laurogolf.com",
    booking_url: "https://www.laurogolf.com",
    email: "info@laurogolf.com"
  },
  {
    name: "Torrequebrada Golf",
    city: "Benalm√°dena",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.golftorrequebrada.com",
    booking_url: "https://www.golftorrequebrada.com/en/book-online",
    email: "bookings@golftorrequebrada.com"
  },
  {
    name: "Guadalhorce Club de Golf",
    city: "Campanillas (M√°laga)",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.guadalhorce.com",
    booking_url: "https://www.guadalhorce.com",
    email: "reservas@guadalhorce.com"
  },
  {
    name: "Parador de M√°laga Golf",
    city: "M√°laga",
    province: "M√°laga",
    country: "Spain",
    website_url: "https://www.parador.es",
    booking_url: "https://www.parador.es/en/paradores/parador-de-malaga-golf",
    email: "malaga@parador.es"
  }
];

When seeding, you can leave lat and lng empty and later enrich them via Google Places API or OpenStreetMap geocoding if you want. The important part is the structure.

‚∏ª

BACKEND ENDPOINTS

Create these REST endpoints:
	‚Ä¢	GET /api/courses
	‚Ä¢	Optional query params: lat, lng, radiusKm, searchTerm
	‚Ä¢	Returns list of courses, optionally sorted by distance.
	‚Ä¢	GET /api/slots/search
	‚Ä¢	Query params: lat, lng, radiusKm, date, players, fromTime, toTime
	‚Ä¢	Logic:
	1.	Determine nearby courses (distance-based).
	2.	For each course, call a provider adapter that tries to fetch next available tee times:
	‚Ä¢	If course has a known provider with an API ‚Üí call API.
	‚Ä¢	If not, optionally try a scraping adapter that:
	‚Ä¢	Respects robots.txt
	‚Ä¢	Uses server-side HTTP requests, not the client
	‚Ä¢	Parses available tee times if feasible.
	‚Ä¢	If scraping is not allowed or too complex, return a booking_url and a message ‚ÄúClick to complete booking on club site‚Äù.
	3.	Aggregate results and return a uniform JSON shape:

{
  "courseId": 123,
  "courseName": "Los Naranjos Golf Club",
  "distanceKm": 12.3,
  "slots": [
    { "teeTime": "...", "greenFee": 120, "currency": "EUR", "players": 2, "source": "golfmanager" }
  ]
}


	‚Ä¢	POST /api/bookings
	‚Ä¢	Body: { courseId, teeTime, players, customerName, customerEmail, customerPhone }
	‚Ä¢	Store in DB as PENDING.
	‚Ä¢	Optionally send an email to the course with booking details (configurable).
	‚Ä¢	Return booking object.
	‚Ä¢	GET /api/bookings
	‚Ä¢	List all for admin.
	‚Ä¢	POST /api/affiliate-emails/send
	‚Ä¢	Body: { courseIds: number[], subject?: string, body?: string }
	‚Ä¢	For each course, send an email using SMTP and store record in affiliate_emails.

‚∏ª

EMAIL SERVICE (AFFILIATE / KICKBACK DEAL)

Use nodemailer with SMTP credentials from environment variables:
	‚Ä¢	SMTP_HOST
	‚Ä¢	SMTP_PORT
	‚Ä¢	SMTP_USER
	‚Ä¢	SMTP_PASS
	‚Ä¢	FROM_EMAIL

Create a default email template the owner can edit in the UI.

Use this default English/Spanish template in the backend:

Subject:
Green fee partnership proposal ‚Äì new guests for [COURSE_NAME]

Body (variable placeholders: [COURSE_NAME], [SENDER_NAME]):

Dear [COURSE_NAME] team,

My name is [SENDER_NAME] and I run a new tee-time finder for golfers on the Costa del Sol.

Our guests are mainly international golfers staying between Sotogrande and M√°laga, and we would like to send more players to your course.

I would like to propose a simple collaboration:

‚Äì We list your course and send you confirmed bookings.
‚Äì For each paid green fee generated through our platform, you offer us a 20% commission.
‚Äì You keep full control of your prices and availability ‚Äì we simply refer players and send you the booking details.

If this is interesting for you, please let me know who is the best person to speak with, and we can set up a simple agreement.

Kind regards,
[SENDER_NAME]

‚Äî‚Äî‚Äî

Estimado equipo de [COURSE_NAME],

Me llamo [SENDER_NAME] y gestiono una nueva plataforma de reservas de green fees en la Costa del Sol.

Nuestros clientes son principalmente golfistas internacionales entre Sotogrande y M√°laga y nos gustar√≠a enviar m√°s jugadores a su campo.

Me gustar√≠a proponer una colaboraci√≥n sencilla:

‚Äì Mostramos su campo y les enviamos reservas confirmadas.
‚Äì Por cada green fee pagado generado a trav√©s de nuestra plataforma, ustedes nos ofrecen una comisi√≥n del 20 %.
‚Äì Ustedes mantienen el control total sobre sus precios y disponibilidad; nosotros solo les remitimos los jugadores y los datos de la reserva.

Si les interesa, por favor ind√≠quenme la persona de contacto adecuada y podemos formalizar un acuerdo sencillo.

Atentamente,
[SENDER_NAME]

Expose this template to the frontend so it can be previewed/edited before sending.

‚∏ª

FRONTEND / UI REQUIREMENTS

Build a React SPA with at least these views:
	1.	Home / ‚ÄúFind Tee Time‚Äù
	‚Ä¢	Button: ‚ÄúUse my current location‚Äù ‚Üí call navigator.geolocation.
	‚Ä¢	Fallback input: address or city (e.g. ‚ÄúMarbella‚Äù) ‚Üí geocode via Google Maps or a simple dropdown of the known cities.
	‚Ä¢	Filters:
	‚Ä¢	Date picker (default today)
	‚Ä¢	Number of players (1‚Äì4)
	‚Ä¢	Time window (e.g. 07:00‚Äì20:00)
	‚Ä¢	Button: ‚ÄúFind nearest tee time‚Äù
	‚Ä¢	Results list:
	‚Ä¢	Card per course with:
	‚Ä¢	Course name
	‚Ä¢	City
	‚Ä¢	Distance in km
	‚Ä¢	Next available tee times (e.g. next 3)
	‚Ä¢	‚ÄúBook‚Äù button
	‚Ä¢	‚ÄúGo to club site‚Äù (uses booking_url if we cannot book directly)
	2.	Booking Flow Modal / Page
	‚Ä¢	Shows selected course and tee time.
	‚Ä¢	Form fields: name, email, phone, players.
	‚Ä¢	On submit ‚Üí call POST /api/bookings.
	‚Ä¢	Show confirmation message: ‚ÄúYour booking request has been sent to the course / stored. We will confirm by email‚Äù.
	3.	Admin / Affiliate Dashboard
	‚Ä¢	Password protected via a simple environment variable password (e.g. ADMIN_PASSWORD).
	‚Ä¢	Sections:
	‚Ä¢	Courses list:
	‚Ä¢	Table with courses, email, city, and a toggle ‚Äúinclude in affiliate email campaign‚Äù.
	‚Ä¢	Affiliate email:
	‚Ä¢	Text input for subject, textarea for body with placeholders [COURSE_NAME] and [SENDER_NAME].
	‚Ä¢	Button ‚ÄúSend emails‚Äù ‚Üí calls /api/affiliate-emails/send.
	‚Ä¢	Show sending status and a log (success/error per course).
	‚Ä¢	Bookings list:
	‚Ä¢	Table of recent bookings with filters.

Use a very simple stylish layout: header with logo/title ‚ÄúCosta del Sol Tee Times‚Äù, responsive cards, and clear buttons.

‚∏ª

SCRAPING & LEGAL / TOS CONSTRAINTS

When implementing the tee-time fetching logic:
	‚Ä¢	Create provider adapters in separate files, e.g. providers/golfmanager.ts, providers/teetimesPt.ts, providers/directClub.ts.
	‚Ä¢	For any target site:
	‚Ä¢	Check/assume robots.txt and Terms of Use ‚Äì do not implement aggressive scraping that violates them.
	‚Ä¢	Prefer:
	‚Ä¢	Official public APIs (if available)
	‚Ä¢	Query parameters documented by tee-time aggregators
	‚Ä¢	Or simply providing a deep link (booking_url) where, if scraping is not allowed, we still help the user by linking them directly.
	‚Ä¢	If real-time scraping is not feasible for some courses, return:

{
  "courseId": ...,
  "courseName": "...",
  "bookingUrl": "...",
  "slots": [],
  "note": "Booking only via club website; click to continue"
}



Make the code modular so that adding more providers later is easy.

‚∏ª

IMPLEMENTATION NOTES
	‚Ä¢	Provide an NPM script to run backend and frontend together (or two scripts documented in README).
	‚Ä¢	Clearly document:
	‚Ä¢	How to run database migrations/seed script.
	‚Ä¢	Which environment variables are required.
	‚Ä¢	Handle errors gracefully; show user-friendly messages on the frontend.

Deliver a working starting version of this app with:
	‚Ä¢	Seeded course data (above).
	‚Ä¢	Geolocation search and distance sorting.
	‚Ä¢	At least a mock implementation of tee-time fetching (it can return a few fake slots per course for now).
	‚Ä¢	Working booking request creation.
	‚Ä¢	Working email send for at least one test course using SMTP (if env vars are present).

This should be a solid, extensible foundation that can later be enhanced with real provider integrations.

---

Hvis du vil, kan jeg i n√¶ste step:

- Tilpasse affiliate-mailen til at komme specifikt fra dig (navn, firma, evt. logo),
- Eller lave en kortere ‚Äúlite‚Äù-prompt kun til at generere **backend API‚Äôet** f√∏rst.